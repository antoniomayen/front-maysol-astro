---
---

<!-- Floating WhatsApp Container -->
<div class="fixed bottom-6 right-6 z-40 2xl:right-[calc((100vw-1600px)/2+1.5rem)]">
  <button 
    id="floating-whatsapp"
    class="btn btn-circle btn-lg lg:btn-xl shadow-xl hover:shadow-2xl hover:scale-110 transition-all float-animation relative overflow-hidden group"
    style="background-image: url('/images/agent_chat.png'); background-size: cover; background-position: center;"
    aria-label="Contactar por WhatsApp"
  >
    <!-- Gradient overlay on hover -->
    <div class="absolute inset-0 bg-gradient-to-t from-success/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
    
    <!-- WhatsApp icon as fallback/overlay -->
    <svg 
      class="w-8 h-8 lg:w-10 lg:h-10 text-white absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"
      fill="currentColor" 
      viewBox="0 0 24 24"
    >
      <path d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.582 2.128 2.182-.573c.978.58 1.911.928 3.145.929 3.178 0 5.767-2.587 5.768-5.766.001-3.187-2.575-5.77-5.764-5.771zm3.392 8.244c-.144.405-.837.774-1.17.824-.299.045-.677.063-1.092-.069-.252-.08-.575-.187-.988-.365-1.739-.751-2.874-2.502-2.961-2.617-.087-.116-.708-.94-.708-1.793s.448-1.273.607-1.446c.159-.173.346-.217.462-.217l.332.006c.106.005.249-.04.39.298.144.347.491 1.2.534 1.287.043.087.072.188.014.304-.058.116-.087.188-.173.289l-.26.304c-.087.086-.177.18-.076.354.101.174.449.741.964 1.201.662.591 1.221.774 1.394.86s.274.072.376-.043c.101-.116.433-.506.549-.68.116-.173.231-.145.39-.087s1.011.477 1.184.564.289.13.332.202c.045.072.045.419-.1.824z"/>
    </svg>
    
    <!-- Pulse effect -->
    <span class="absolute inset-0 rounded-full bg-success animate-ping opacity-20"></span>
    
    <!-- Fallback text for screen readers -->
    <span class="sr-only">WhatsApp</span>
  </button>
  
  <!-- Tooltip -->
  <div 
    id="whatsapp-tooltip"
    class="absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-900 text-white text-sm rounded-lg opacity-0 pointer-events-none transition-opacity whitespace-nowrap"
  >
    Â¡Chatea con nosotros!
    <div class="absolute top-full right-6 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"></div>
  </div>
</div>

<style>
  /* Custom size for xl button on large screens */
  @media (min-width: 1024px) {
    .btn-xl {
      width: 5rem;
      height: 5rem;
    }
  }
  
  /* Show tooltip on hover */
  #floating-whatsapp:hover + #whatsapp-tooltip {
    opacity: 1;
  }
  
  /* Enhanced float animation */
  @keyframes float {
    0%, 100% { 
      transform: translateY(0px) rotate(0deg); 
    }
    25% { 
      transform: translateY(-8px) rotate(-2deg); 
    }
    75% { 
      transform: translateY(-5px) rotate(2deg); 
    }
  }
  
  .float-animation {
    animation: float 4s ease-in-out infinite;
  }
  
  /* Pulse animation */
  @keyframes ping {
    75%, 100% {
      transform: scale(2);
      opacity: 0;
    }
  }
  
  .animate-ping {
    animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  }
</style>

<script>
  // Add click event listener
  document.getElementById('floating-whatsapp')?.addEventListener('click', () => {
    const modal = document.getElementById('whatsapp-modal') as HTMLDialogElement;
    if (modal) {
      modal.showModal();
    }
  });
  
  // Show tooltip after delay
  setTimeout(() => {
    const tooltip = document.getElementById('whatsapp-tooltip');
    if (tooltip) {
      tooltip.style.opacity = '1';
      setTimeout(() => {
        tooltip.style.opacity = '0';
      }, 3000);
    }
  }, 5000);
</script>